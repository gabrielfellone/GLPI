!function(a){a.fn.autogrow=function(b){return this.filter("textarea").each(function(){var c=this,d=a(c),e=d.height(),f=d.hasClass("autogrow-short")?0:parseInt(d.css("lineHeight"))||0,g=a.extend({preGrowCallback:null,postGrowCallback:null},b),h=a("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:d.width(),fontSize:d.css("fontSize"),fontFamily:d.css("fontFamily"),fontWeight:d.css("fontWeight"),lineHeight:d.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body),i=function(a){var b=function(a,b){for(var c=0,d="";b>c;c++)d+=a;return d},i=c.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(a){return b("&nbsp;",a.length-1)+" "});a&&a.data&&"keydown"===a.data.event&&13===a.keyCode&&(i+="<br />"),h.css("width",d.width()),h.html(i+(0===f?"...":""));var j=Math.max(h.height()+f,e);null!=g.preGrowCallback&&(j=g.preGrowCallback(d,h,j,e)),d.height(j),null!=g.postGrowCallback&&g.postGrowCallback(d)};d.change(i).keyup(i).keydown({event:"keydown"},i),a(window).resize(i),i()})}}(jQuery);